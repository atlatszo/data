function ConvertToCSV(e){for(var t="object"!=typeof e?JSON.parse(e):e,a="",r=0;r<t.length;r++){var o="";for(var n in t[r])""!=o&&(o+=","),o+=t[r][n];a+=o+"\r\n"}return a}function render_chart(e,t){function a(){return d3.svg.axis().scale(c).orient("left").ticks(5)}function r(e,t){var a=function(e,t){return e+t},r=1*e.reduce(a)/e.length,o=1*t.reduce(a)/t.length,n=e.map(function(e){return Math.pow(e-r,2)}).reduce(a),s=t.map(function(e){return Math.pow(e-o,2)}).reduce(a),i=e.map(function(e,a){return(e-r)*(t[a]-o)}).reduce(a),l=i/n,d=o-r*l,c=Math.pow(i,2)/(n*s);return[l,d,c]}var o={top:22,right:25,bottom:22,left:65},n=320-o.left-o.right,s=250-o.top-o.bottom,i=d3.time.format("%Y").parse,l=(d3.time.format("%Y").parse,d3.time.format("%Y"),d3.time.format("%Y")),d=d3.scale.ordinal().rangeRoundBands([0,n],.1),c=d3.scale.linear().rangeRound([s,0]),p=d3.scale.ordinal().range(["#FF665A","#FFCA63","#ebdecc","#176B86","#4D8E27"]),e=d3.selectAll("#playchart").append("svg").attr("class","playchart_"+e).attr("width",n+o.left+o.right).attr("height",s+o.top+o.bottom).append("g").attr("transform","translate("+o.left+","+o.top+")");e.append("g").attr("class","background_group");var g=t,h=JSON.stringify(g),m="N,KTIA,USZ,TrDate,EU,SZ\n"+ConvertToCSV(h);data=d3.csv.parse(m,function(e){return{TrDate:l(i(e.TrDate)),EU:+e.EU,KTIA:+e.KTIA,szechenyi:e.SZ,ujszechenyi:e.USZ,nemzeti:e.N}}),p.domain(d3.keys(data[0]).filter(function(e){return"TrDate"!==e})),data.forEach(function(e){var t=0;e.ages=p.domain().map(function(a){return{name:a,y0:t,y1:t+=+e[a],date:e.TrDate,EU:e.EU}}),e.total=e.ages[e.ages.length-1].y1,e.EU=e.ages[e.ages.length-1].EU}),d.domain(data.map(function(e){return e.TrDate})),c.domain([0,d3.max(data,function(e){return e.total})]);var u=(d3.svg.line().x(function(e){return d(e.TrDate)}).y(function(e){return c(e.total)}),Math.round((data.length-1)/2)),f=d3.svg.axis().scale(d).orient("bottom").tickValues([data[0].TrDate,data[u].TrDate,data[data.length-1].TrDate]);e.append("g").attr("class","grid").call(a().tickSize(-n,0,0).tickFormat("")),e.append("g").attr("class","grid").call(a().tickSize(-n,0,0).tickFormat(""));var v=(c.domain().slice(-1),d3.svg.axis().scale(c).orient("left").ticks(5,"s").tickFormat(d3.format(",")));e.append("g").attr("class","x axis").attr("transform","translate(0,"+s+")").call(f),e.append("g").attr("class","y axis").call(v);var _=data.map(function(e){return e.TrDate}),y=d3.range(1,_.length+1),$=data.map(function(e){return parseFloat(e.total)}),I=data.map(function(e){return parseFloat(e.EU)}),T=r(y,$),E=r(y,I),C=_[0],A=0,w=0,D=T[0]+T[1];0>D&&(A=-1*D,D=0);var N=E[0]+E[1];0>N&&(w=-1*D,N=0);var F=_[_.length-1],x=T[0]*y.length+T[1]+A;0>x&&(x=0);var j=E[0]*y.length+E[1]+w;0>j&&(j=0);var b=[[C,D,F,x]],O=[[C,N,F,j]],L=e.selectAll(".transdate").data(data).enter().append("g").attr("class","g balance_bar").attr("transform",function(e){return"translate("+d(e.TrDate)+",0)"});L.selectAll("rect").data(function(e){return e.ages}).enter().append("rect").attr("width",d.rangeBand()).attr("class",function(e){return e.name+" bars"}).attr("data-date",function(e){return e.date}).attr("y",function(e){return c(0)}).attr("height",function(e){return c(0)-c(0)}).transition().duration(0).attr("y",function(e){return c(e.y1)-1}).attr("data-selected",function(e){return c(e.y1)-1}).attr("data-balance",function(e){return c(e.y1)}).attr("height",function(e){return c(e.y0)-c(e.y1)}).style("fill",function(e){return p(e.name)}).style("stroke","#333").style("opacity","0.7").style("stroke-width","0.5"),e.selectAll(".g").data(data).attr("data",function(e){return e.TrDate}).attr("balance",function(e){return e.total});var k=e.selectAll(".trendline").data(b);k.enter().append("line").attr("class","trendline").attr("x1",function(e){return d(e[0])}).attr("y1",function(e){return c(e[1])}).attr("x2",function(e){return d(e[2])}).attr("y2",function(e){return c(e[3])}).attr("stroke","#79DCE8").attr("stroke-width",2).style("stroke-dasharray","3, 3").style("stroke-opacity",.7);var U=e.selectAll(".trendlinePlays").data(O);U.enter().append("line").attr("class","trendlinePlays").attr("x1",function(e){return d(e[0])}).attr("y1",function(e){return c(e[1])}).attr("x2",function(e){return d(e[2])}).attr("y2",function(e){return c(e[3])}).attr("stroke","#79DCE8").attr("stroke-width",2).style("stroke-dasharray","3, 3").style("stroke-opacity",.7)}function getColor_t(e,t){return"DONATION"===t?e>=2675472?"#B10026":e>=271551?"#B10026":e>=3316?"#E31A1C":e>=1828?"#FC4E2A":e>=592?"#FD8D3C":e>=361?"#FEB24C":e>=130?"#FED976":e>=1?"#FFFFB2":0===e?"#D4D4D4":"#FFFFB2":"CAPITA"===t?e>=44534232?"#0C2C84":e>=10738345?"#0C2C84":e>=1635418?"#225EA8":e>=864218?"#1D91C0":e>=429965?"#41B6C4":e>=280100?"#7FCDBB":e>=147594?"#C7E9B4":e>=1?"#FFFFCC":0===e?"#D4D4D4":"#FFFFCC":"DEVIATION_2007"===t||"DEVIATION_2010"===t||"DEVIATION_2014"===t?e>=200?"#ff4d4d":e>=175?"#ff4d4d":e>=150?"#ff7a7a":e>=125?"#ffa6a6":e>=75?"#fff2cc":e>=50?"#7fbfff":e>=25?"#40a0ff":e>=1?"#0080ff":"#D4D4D4":void 0}function render_chart2(e,t){function a(e){for(var t=e[0].length;t--;){var a=0,r=0;e.forEach(function(e){e=e[t],e.size=Math.abs(e.y),e.y<0?(e.y0=r,r-=e.size):e.y0=a+=e.size})}e.extent=d3.extent(d3.merge(d3.merge(e.map(function(e){return e.map(function(e){return[e.y0,e.y0-e.size]})}))))}function r(){return d3.svg.axis().scale(h).orient("left").ticks(5)}function o(e){return 0===e?2007:1===e?2008:2===e?2009:3===e?2010:4===e?2011:5===e?2012:6===e?2013:7===e?2014:8===e?2015:void 0}function n(e){"DEVIATION_2007"===metric?e.each(function(){var e=d3.select(this);parseInt(e.attr("data-year"))<=2009?e.style("opacity","0.7").style("filter","url(#drop-shadow)"):e.style("opacity","0.3")}):"DEVIATION_2010"===metric?e.each(function(){var e=d3.select(this);parseInt(e.attr("data-year"))>2009&&parseInt(e.attr("data-year"))<2014?e.style("opacity","0.7").style("filter","url(#drop-shadow)"):e.style("opacity","0.3")}):"DEVIATION_2014"===metric&&e.each(function(){var e=d3.select(this);parseInt(e.attr("data-year"))>=2014?e.style("opacity","0.7").style("filter","url(#drop-shadow)"):e.style("opacity","0.3")})}function s(e){"DEVIATION_2007"===metric?e.each(function(){var e=d3.select(this);parseInt(e.attr("data-year"))<=2009?e.style("opacity","0.7"):e.style("opacity","0.3")}):"DEVIATION_2010"===metric?e.each(function(){var e=d3.select(this);parseInt(e.attr("data-year"))>2009&&parseInt(e.attr("data-year"))<2014?e.style("opacity","0.7"):e.style("opacity","0.3")}):"DEVIATION_2014"===metric&&e.each(function(){var e=d3.select(this);parseInt(e.attr("data-year"))>=2014?e.style("opacity","0.7"):e.style("opacity","0.3")})}var i={top:22,right:25,bottom:22,left:65},l=320,d=280,c=t,p=(d3.scale.ordinal().range(["#4D8E27","#FF665A","#176B86","#777777"]),d3.scale.ordinal().range(["url('#purpleStripe')","url('#hash4_5')","rgba(0,0,0,0)","rgba(0,0,0,0)"])),g=d3.scale.ordinal().domain([2007," ","  ","   ",2011,"    ","     ","        ",2015]).rangeRoundBands([i.left,l-i.right],.1),h=d3.scale.linear().range([d-i.top,0+i.bottom]),m=d3.svg.axis().scale(g).orient("bottom").ticks(3,4),u=d3.svg.axis().scale(h).orient("left").tickFormat(function(e){return e+100+"%"}).ticks(5);a(c),h.domain(c.extent),svg=d3.select("#playchart").append("svg").attr("class","playchart_"+e).attr("width",l).attr("height",d),svg.append("g").attr("class","background_group");var f=svg.append("defs"),v=f.append("filter").attr("id","drop-shadow").attr("height","130%");v.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",5).attr("result","blur"),v.append("feOffset").attr("in","blur").attr("dx",5).attr("dy",5).attr("result","offsetBlur");var _=v.append("feMerge");_.append("feMergeNode").attr("in","offsetBlur"),_.append("feMergeNode").attr("in","SourceGraphic"),svg.append("g").attr("class","grid").attr("transform","translate("+i.left+" 0)").call(r().tickSize(-230,0,0).tickFormat("")),svg.selectAll(".series").data(c).enter().append("g").classed("series",!0).selectAll("rect").data(Object).enter().append("rect").attr("class","deviationBar").attr("x",function(e,t){return g(g.domain()[t])}).attr("data-year",function(e,t){return o(t)}).attr("data-value",function(e,t){return e.y}).attr("width",g.rangeBand()).attr("y",function(e){return h(0)}).attr("height",function(e){return h(0)-h(0)}).transition().duration(0).attr("y",function(e){return h(e.y0)}).attr("height",function(e){return h(0)-h(e.size)}).style("stroke","#333").style("stroke-width","0.5").style("fill",function(e,t){return getColor_t(parseInt(e.y)+100,"DEVIATION_2007")}),svg.selectAll(".series2").data(c).enter().append("g").classed("series2",!0).style("fill",function(e,t){return p(t)}).selectAll("rect").data(Object).enter().append("rect").attr("class","patternBar").attr("data-year",function(e,t){return o(t)}).attr("x",function(e,t){return g(g.domain()[t])}).attr("width",g.rangeBand()).attr("y",function(e){return h(0)}).attr("height",function(e){return h(0)-h(0)}).transition().duration(0).attr("y",function(e){return h(e.y0)}).attr("height",function(e){return h(0)-h(e.size)}).style("stroke","#333").style("stroke-width","0.5"),svg.selectAll(".deviationBar").call(n),svg.selectAll(".patternBar").call(s),svg.append("g").attr("class","axis x").attr("transform","translate(0 "+h(0)+")").call(m),svg.append("g").attr("class","axis y").attr("transform","translate("+i.left+" 0)").call(u);var y=svg.append("g").attr("class","tooltip").style("display","none");y.append("rect").attr("width",30).attr("height",20).attr("fill","white").style("opacity",.5),y.append("text").attr("x",15).attr("dy","1.2em").style("text-anchor","middle").attr("font-size","12px").attr("font-weight","bold")}function getColor_m(e,t){return"DONATION"===t?e>=2675472?"#B10026":e>=590828?"#B10026":e>=477281?"#E31A1C":e>=411403?"#FC4E2A":e>=339351?"#FD8D3C":e>=316725?"#FEB24C":e>=200732?"#FED976":"#FFFFB2":"CAPITA"===t?e>=1543228?"#0C2C84":e>=1400640?"#0C2C84":e>=1008979?"#225EA8":e>=883432?"#1D91C0":e>=805802?"#41B6C4":e>=672658?"#7FCDBB":e>=387974?"#C7E9B4":"#FFFFCC":void 0}function getColor_k(e,t){return"DONATION"===t?e>=2292160?"#B10026":e>=393346?"#B10026":e>=155903?"#E31A1C":e>=45328?"#FC4E2A":e>=31826?"#FD8D3C":e>=24723?"#FEB24C":e>=17620?"#FED976":"#FFFFB2":"CAPITA"===t?e>=6713015?"#0C2C84":e>=3991456?"#0C2C84":e>=1214538?"#225EA8":e>=1022784?"#1D91C0":e>=730618?"#41B6C4":e>=561674?"#7FCDBB":e>=280573?"#C7E9B4":"#FFFFCC":void 0}function getPattern(e){return"DEVIATION_2007"===metric?"RULER"===e[2007]?"url(#purpleStripe)":"UD"===e[2007]?"url(#hash4_5)":"rgba(0,0,0,0)":"DEVIATION_2010"===metric?"RULER"===e[2010]?"url(#purpleStripe)":"UD"===e[2010]?"url(#hash4_5)":"rgba(0,0,0,0)":"DEVIATION_2014"===metric?"RULER"===e[2014]?"url(#purpleStripe)":"UD"===e[2014]?"url(#hash4_5)":"rgba(0,0,0,0)":void 0}function stripes_style(e){return"undefined"!=typeof e.properties.DEVIATION_PATTERN?{fillColor:getPattern(e.properties.DEVIATION_PATTERN),fillOpacity:.6,weight:1,opacity:1,color:"#333333",dashArray:"",className:e.properties.TEL_NEV}:{fillColor:"#FFFFFF",fillOpacity:.6,weight:1,opacity:1,color:"#333333",dashArray:"",className:e.properties.TEL_NEV}}function style(e){return"megye"===adminUnit?{fillColor:getColor_m(e.properties[metric],metric),weight:1,opacity:.8,color:"#333333",dashArray:"",fillOpacity:.6,className:e.properties.TEL_NEV}:"kisterseg"===adminUnit?{fillColor:getColor_k(e.properties[metric],metric),weight:1,opacity:.8,color:"#333333",dashArray:"",fillOpacity:.6,className:e.properties.TEL_NEV}:"telepules"===adminUnit?{fillColor:getColor_t(e.properties[metric],metric),weight:1,opacity:.8,color:"#333333",dashArray:"",fillOpacity:.6}:void 0}function highlightFeature(e){var t=e.target;t.setStyle({weight:2,color:"#000000",dashArray:"",fillOpacity:.2}),L.Browser.ie||L.Browser.opera||t.bringToFront(),info.update(t.feature.properties),$(".legend_elem").each(function(){$(this).removeClass("legend_featured"),parseInt($(this).attr("data-range_start"))<=parseInt(t.feature.properties[metric])&&parseInt($(this).attr("data-range_end"))>=parseInt(t.feature.properties[metric])?$(this).addClass("legend_featured"):parseInt($(this).attr("data-range_start"))<=parseInt(t.feature.properties[metric])&&"undefined"===$(this).attr("data-range_end")&&$(this).addClass("legend_featured")})}function resetHighlight(e){geojson.resetStyle(e.target),$(".legend_elem").each(function(){$(this).removeClass("legend_featured")}),info.update()}function zoomToFeature(e){if(map.getZoom()>=12||"DEVIATION"===timeSeries){var t,a=e.target;if(a.properties&&a.properties.TEL_NEV)var t=L.popup({autoPanPaddingTopLeft:L.point(10,100),autoPanPaddingBottomRight:L.point(350,10)}).setContent("<a href='adat.atlatszo.hu/eu-kereso/?varos="+encodeURIComponent(feature.properties.TEL_NEV)+"' target='_blank'><div class='popupButton' data-uid='"+feature.properties.TEL_NEV+"'>"+feature.properties.TEL_NEV+":<br>az összes pályázat listázása</div></a>");pop=a.bindPopup(t),pop.openPopup()}}function onEachFeatureIndex(e,t){markersById[e.properties.TEL_NEV]=t}function onEachFeature(e,t){if(markersById[e.properties.TEL_NEV]=t,t.on("dblclick",function(e){if(map.getZoom()<12&&"DEVIATION"!=timeSeries){var t=e.target.getBounds().getCenter(),a=[t.lat,t.lng],r=map.getZoom();map.setView(new L.LatLng(a[0],a[1]),r+1,{animate:!0})}}),(map.getZoom()>=12||"DEVIATION"===timeSeries)&&e.properties&&e.properties.TEL_NEV){var a=L.popup({autoPanPaddingTopLeft:L.point(10,100),autoPanPaddingBottomRight:L.point(350,10)}).setContent("<a href='http://adat.atlatszo.hu/eu-kereso/?varos="+encodeURIComponent(e.properties.TEL_NEV)+"' target='_blank'><div class='popupButton' data-uid='"+e.properties.TEL_NEV+"'>"+e.properties.TEL_NEV+":<br>az összes pályázat listázása</div></a>");t.bindPopup(a)}t.on({mouseover:highlightFeature,mouseout:resetHighlight,click:zoomToFeature})}var adminUnit="megye",metric="DONATION",timeSeries="DONATION_TIME",geojson,stripes,indexHamlet,loader='<div class="spinner"></div>';Number.prototype.format=function(e,t,a,r){var o="\\d(?=(\\d{"+(t||3)+"})+"+(e>0?"\\D":"$")+")",n=this.toFixed(Math.max(0,~~e));return(r?n.replace(".",r):n).replace(new RegExp(o,"g"),"$&"+(a||","))};var hufFormat=d3.locale({decimal:".",thousands:" ",grouping:[3],currency:["","HUF"],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["de","du"],days:["Vasárnap","Hétfő","Kedd","Szerda","Csütörtök","Péntek","Szombat"],shortDays:["V","H","K","Sze","Cs","P","Szo"],months:["Január","Február","Március","Április","Május","Június","Július","Augusztus","Szeptember","Október","November","December"],shortMonths:["Jan","Feb","Már","Ápr","Máj","Jún","Júl","Aug","Sze","Okt","Nov","Dec"]});d3.format=hufFormat.numberFormat;var southWest=L.latLng(45.1423360997,14.8645019531),northEast=L.latLng(49.8370967393,25.4333496094),bounds=L.latLngBounds(southWest,northEast),map=L.map("map",{center:[47.162494,19.503304],zoom:7,maxBounds:bounds,minZoom:7,maxZoom:14});L.tileLayer("http://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",{attribution:'&copy; <a target="_blank" href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> | <a target="_blank" href="http://www.atlatszo.hu">atlatszo.hu</a>'}).addTo(map);var markersById={},info=L.control(),chart=L.control();info.onAdd=function(e){return this._div=L.DomUtil.create("div","info popup"),this.update(),this._div},chart.onAdd=function(e){return this._div=L.DomUtil.create("div","chart"),this._div},info.update=function(e){e?$("#playchart").show():0===$(".chart:hover").length&&($(".playchart_1").remove(),$("#playchart").hide()),"DONATION"===metric?e?this._div.innerHTML='<div class="info_header">'+e.TEL_NEV+'</div><b><h4 class="original_info">Átlagos EU támogatás (millió Ft / év):</h4></b><div class="info_ammount original_info">'+(e[metric]/9).format(0,3," ")+' millió Ft</div><b><h4 class="hidden_info" >Összes EU támogatás (millió Ft):</h4></b><div class="info_ammount hidden_info">'+(e[metric]/9).format(0,3," ")+" millió Ft</div>":0===$(".chart:hover").length&&(this._div.innerHTML="Átlagos évenkénti EU támogatás 2007-2015."):"CAPITA"===metric?e?this._div.innerHTML='<div class="info_header">'+e.TEL_NEV+'</div><b><h4>Egy főre jutó EU támogatás (fő / év / Ft):</h4></b><div class="info_ammount">'+(e[metric]/9).format(0,3," ")+" Ft</div>":0===$(".chart:hover").length&&(this._div.innerHTML="Egy főre jutó évi EU támogatás 2007-2015."):"DEVIATION_2007"===metric?e?this._div.innerHTML='<div class="info_header">'+e.TEL_NEV+'</div><b><h4>Mo. fő / év átlagától való eltérés (2007-2009):</h4></b><div class="info_ammount">'+parseInt(e[metric])+" %</div>":0===$(".chart:hover").length&&(this._div.innerHTML="Választási ciklus szerinti EU támogatás"):"DEVIATION_2010"===metric?e?this._div.innerHTML='<div class="info_header">'+e.TEL_NEV+'</div><b><h4>Mo. fő / év átlagától való eltérés (2010-2013):</h4></b><div class="info_ammount">'+parseInt(e[metric])+" %</div>":0===$(".chart:hover").length&&(this._div.innerHTML="Választási ciklus szerinti EU támogatás"):"DEVIATION_2014"===metric&&(e?this._div.innerHTML='<div class="info_header">'+e.TEL_NEV+'</div><b><h4>Mo. fő / év átlagától való eltérés (2014-2015):</h4></b><div class="info_ammount">'+parseInt(e[metric])+" %</div>":0===$(".chart:hover").length&&(this._div.innerHTML="Választási ciklus szerinti EU támogatás")),"undefined"!=typeof e&&("undefined"!=typeof e[timeSeries]?"DONATION_TIME"==timeSeries||"CAPITA_TIME"==timeSeries?($(".playchart_1").remove(),render_chart("1",e[timeSeries]),$("#playchart").show()):"DEVIATION"==timeSeries&&($(".playchart_1").remove(),render_chart2("1",e[timeSeries]),$("#playchart").show()):0===$(".chart:hover").length&&$("#playchart").hide())},info.addTo(map),chart.addTo(map),indexHamlet=L.geoJson(telepules,{onEachFeature:onEachFeatureIndex});var legend=L.control({position:"bottomright"});legend.onAdd=function(e){if(e.getZoom()<=9){if("DONATION"===metric){for(var t=L.DomUtil.create("div","info legend"),a=[0,200731,316724,339350,411402,477280,590827],r=0;r<a.length;r++)t.innerHTML+='<div class="legend_elem" data-range_start="'+(a[r]+1)+'" data-range_end="'+a[r+1]+'"><div class="legend_icon" style="background:'+getColor_m(a[r]+1,metric)+'"></div><div class="legend_text2">'+(a[r]/9+1).format(0,3," ")+(a[r+1]?" &ndash; "+(a[r+1]/9).format(0,3," ")+" millió Ft<br>":"+ millió Ft")+"</div></div>";return t}if("CAPITA"===metric){for(var t=L.DomUtil.create("div","info legend"),a=[0,387974,672658,805802,883432,1008979,1400640],r=0;r<a.length;r++)t.innerHTML+='<div class="legend_elem" data-range_start="'+(a[r]+1)+'" data-range_end="'+a[r+1]+'"><div class="legend_icon" style="background:'+getColor_m(a[r]+1,metric)+'"></div><div class="legend_text2">'+(a[r]/9+1).format(0,3," ")+(a[r+1]?" &ndash; "+(a[r+1]/9).format(0,3," ")+" Ft<br>":"+ Ft")+"</div></div>";return t}if("DEVIATION_2007"===metric||"DEVIATION_2010"===metric||"DEVIATION_2014"===metric){for(var t=L.DomUtil.create("div","info legend"),a=[0,25,50,75,125,150,175],r=0;r<a.length;r++)t.innerHTML+='<div class="legend_elem" data-range_start="'+(a[r]+1)+'" data-range_end="'+a[r+1]+'"><div class="legend_icon" style="background:'+getColor_t(a[r]+1,metric)+'"></div><div class="legend_text2">'+(a[r]+1).format(0,3," ")+(a[r+1]?" &ndash; "+a[r+1].format(0,3," ")+" %<br>":"+ %")+"</div></div>";return t}}else if(e.getZoom()<=11){if("DONATION"===metric){for(var t=L.DomUtil.create("div","info legend"),a=[0,17620,24723,31826,45328,155903,393346],r=0;r<a.length;r++)t.innerHTML+='<div class="legend_elem" data-range_start="'+(a[r]+1)+'" data-range_end="'+a[r+1]+'"><div class="legend_icon" style="background:'+getColor_k(a[r]+1,metric)+'"></div><div class="legend_text2">'+(a[r]/9+1).format(0,3," ")+(a[r+1]?" &ndash; "+(a[r+1]/9).format(0,3," ")+" millió Ft<br>":"+ millió Ft")+"</div></div>";return t}if("CAPITA"===metric){for(var t=L.DomUtil.create("div","info legend"),a=[0,280575,561674,730618,1022784,1214538,3991456],r=0;r<a.length;r++)t.innerHTML+='<div class="legend_elem" data-range_start="'+(a[r]+1)+'" data-range_end="'+a[r+1]+'"><div class="legend_icon" style="background:'+getColor_k(a[r]+1,metric)+'"></div><div class="legend_text2">'+(a[r]/9+1).format(0,3," ")+(a[r+1]?" &ndash; "+(a[r+1]/9).format(0,3," ")+" Ft<br>":"+ Ft")+"</div></div>";return t}if("DEVIATION_2007"===metric||"DEVIATION_2010"===metric||"DEVIATION_2014"===metric){for(var t=L.DomUtil.create("div","info legend"),a=[0,25,50,75,125,150,175],r=0;r<a.length;r++)t.innerHTML+='<div class="legend_elem" data-range_start="'+(a[r]+1)+'" data-range_end="'+a[r+1]+'"><div class="legend_icon" style="background:'+getColor_t(a[r]+1,metric)+'"></div><div class="legend_text2">'+(a[r]+1).format(0,3," ")+(a[r+1]?" &ndash; "+a[r+1].format(0,3," ")+" %<br>":"+ %")+"</div></div>";return t}}else{if("DONATION"===metric){for(var t=L.DomUtil.create("div","info legend"),a=[0,130,361,592,1828,3316,271551],r=0;r<a.length;r++)t.innerHTML+='<div class="legend_elem" data-range_start="'+(a[r]+1)+'" data-range_end="'+a[r+1]+'"><div class="legend_icon" style="background:'+getColor_t(a[r]+1,metric)+'"></div><div class="legend_text2">'+(a[r]/9+1).format(0,3," ")+(a[r+1]?" &ndash; "+(a[r+1]/9).format(0,3," ")+" millió Ft<br>":"+ millió Ft")+"</div></div>";return t}if("CAPITA"===metric){for(var t=L.DomUtil.create("div","info legend"),a=[0,147594,280175,429965,864218,1635418,10738345],r=0;r<a.length;r++)t.innerHTML+='<div class="legend_elem" data-range_start="'+(a[r]+1)+'" data-range_end="'+a[r+1]+'"><div class="legend_icon" style="background:'+getColor_t(a[r]+1,metric)+'"></div><div class="legend_text2">'+(a[r]/9+1).format(0,3," ")+(a[r+1]?" &ndash; "+(a[r+1]/9).format(0,3," ")+" Ft<br>":"+ Ft")+"</div></div>";return t}if("DEVIATION_2007"===metric||"DEVIATION_2010"===metric||"DEVIATION_2014"===metric){for(var t=L.DomUtil.create("div","info legend"),a=[0,25,50,75,125,150,175],r=0;r<a.length;r++)t.innerHTML+='<div class="legend_elem" data-range_start="'+(a[r]+1)+'" data-range_end="'+a[r+1]+'"><div class="legend_icon" style="background:'+getColor_t(a[r]+1,metric)+'"></div><div class="legend_text2">'+(a[r]+1).format(0,3," ")+(a[r+1]?" &ndash; "+a[r+1].format(0,3," ")+" %<br>":"+ %")+"</div></div>";return t}}},legend.addTo(map),map.on("zoomend",function(){$(".playchart_1").remove(),$("#playchart").hide(),info.update(),"DEVIATION"!=timeSeries&&(map.getZoom()<=9?(adminUnit="megye",$.ajax({dataType:"json",async:!0,url:"js/megye.json",success:function(e){map.removeLayer(geojson),geojson=L.geoJson(e,{style:style,onEachFeature:onEachFeature}),geojson.addTo(map)},error:function(){},complete:function(){}}),map.removeControl(legend),legend.addTo(map)):map.getZoom()<=11?(adminUnit="kisterseg",$.ajax({dataType:"json",async:!0,url:"js/kisterseg.json",success:function(e){map.removeLayer(geojson),geojson=L.geoJson(e,{style:style,onEachFeature:onEachFeature}),geojson.addTo(map)},error:function(){},complete:function(){}}),map.removeControl(legend),legend.addTo(map)):(adminUnit="telepules",$.ajax({dataType:"json",async:!0,url:"js/telepules.json",success:function(e){map.removeLayer(geojson),geojson=L.geoJson(e,{style:style,onEachFeature:onEachFeature}),geojson.addTo(map)},error:function(){},complete:function(){}}),map.removeControl(legend),legend.addTo(map)))});var getUrlParameter=function(e){var t,a,r=decodeURIComponent(window.location.search.substring(1)),o=r.split("&");for(a=0;a<o.length;a++)if(t=o[a].split("="),t[0]===e)return void 0===t[1]?!0:t[1]};$(document).ready(function(){$(".chart").append('<div id="playchart">                                                             <div class="legend_header">Támogatás összesen:</div>                                                             <div class="legend_subheader"></div>                                                             <div class="chart_legend_a">                                                                 <div class="legend_left legend_chart EU" id="EU">                                                                     <div class="legend_icon"></div>                                                                     <div class="legend_text">EU 2007-2013 tám. program</div>                                                                 </div>                                                                 <div class="legend_right legend_chart KTIA" id="KTIA">                                                                     <div class="legend_icon"></div>                                                                     <div class="legend_text">Kutatási, techn. és innov. alap</div>                                                                 </div>                                                                 <div class="legend_left legend_chart szechenyi USZ" id="szechenyi">                                                                     <div class="legend_icon"></div>                                                                     <div class="legend_text">Új Széchenyi<br>Terv</div>                                                                 </div>                                                                 <div class="legend_right legend_chart ujszechenyi SZ" id="ujszechenyi">                                                                     <div class="legend_icon"></div>                                                                     <div class="legend_text">Széchenyi<br>2020</div>                                                                 </div>                                                                 <div class="legend_left legend_chart nemzeti N" id="nemzeti">                                                                     <div class="legend_icon"></div>                                                                     <div class="legend_text">Nemzeti Fej-<br>lesztési Terv</div>                                                                 </div>                                                             </div>                                                             <div class="chart_legend_b">                                                                 <div class="legend_left legend_chart REIGN">                                                                     <div class="legend_icon"></div>                                                                     <div class="legend_text">Kormánypárti polgármester</div>                                                                 </div>                                                                 <div class="legend_right legend_chart OPP">                                                                     <div class="legend_icon"></div>                                                                     <div class="legend_text">Ellenzéki polgármester</div>                                                                 </div>                                                                 <div class="legend_left legend_chart IND">                                                                     <div class="legend_icon"></div>                                                                     <div class="legend_text">Független polgármester</div>                                                                 </div>                                                                 <div class="legend_right legend_chart NA">                                                                     <div class="legend_icon"></div>                                                                     <div class="legend_text">Nem áll rendel-kezésre információ</div>                                                                 </div>                                                             </div>                                                         </div>'),$(".main_search").autocomplete({minlength:8,autofocus:"true",appendTo:".autocomplete_container",source:autocompletelist,focus:function(e,t){return!1},select:function(e,t){$(".main_search").val(t.item.value);var a=t.item.value,r=markersById[a],o=r.getBounds().getCenter(),n=[o.lat,o.lng];return map.setView(new L.LatLng(n[0],n[1]),12,{animate:!0}),markersById[a].setStyle({weight:4,color:"#4D8E27",dashArray:"10",fillColor:"url(#hash4_4)",fillOpacity:.2}),setTimeout(function(){markersById[a].setStyle({weight:4,color:"#4D8E27",dashArray:"10",fillColor:"url(#hash4_4)",fillOpacity:.2})},1e3),info.update(r.feature.properties),$(".legend_elem").each(function(){$(this).removeClass("legend_featured"),parseInt($(this).attr("data-range_start"))<=parseInt(r.feature.properties[metric])&&parseInt($(this).attr("data-range_end"))>=parseInt(r.feature.properties[metric])?$(this).addClass("legend_featured"):parseInt($(this).attr("data-range_start"))<=parseInt(r.feature.properties[metric])&&"undefined"===$(this).attr("data-range_end")&&$(this).addClass("legend_featured")}),map.on("movestart",function(){geojson.resetStyle(markersById[a])}),!1}}),$("#human_logo").hover(function(){"CAPITA"!=metric&&($(".playchart_1").remove(),$("#playchart").hide(),$("#human_logo").addClass("hover_logo"),$(".popup.leaflet-control").addClass("hover_pop"),$(".popup.leaflet-control").html("Egy főre jutó évi EU támogatás 2007-2015."),$(".popup").append(loader))},function(){"DONATION"===metric?($(".popup.leaflet-control").html("Átlagos évi EU támogatás 2007-2015."),$("#human_logo").removeClass("hover_logo"),$(".popup.leaflet-control").removeClass("hover_pop")):"CAPITA"===metric?($(".popup.leaflet-control").html("Egy főre jutó évi EU támogatás 2007-2015."),$("#human_logo").removeClass("hover_logo"),$("#human_logo").addClass("active_logo"),$(".popup.leaflet-control").removeClass("hover_pop")):($(".popup.leaflet-control").html("Választási ciklus szerinti EU támogatás"),$("#human_logo").removeClass("hover_logo"),$(".popup.leaflet-control").removeClass("hover_pop"))}),$("#human_logo").on("click",function(){$(".party_selector_wrapper").hide(),adminUnit=map.getZoom()<=9?"megye":map.getZoom()<=11?"kisterseg":"telepules",("DEVIATION_2007"===metric||"DEVIATION_2010"===metric||"DEVIATION_2014"===metric)&&map.removeLayer(stripes),"CAPITA"!=metric&&(metric="CAPITA",timeSeries="CAPITA_TIME",$(".chart_legend_b").hide(),$(".chart_legend_a").show(),$(".spinner").show(),$(".logo").each(function(){$(this).removeClass("active_logo"),$(this).removeClass("hover_logo")}),$("#human_logo").addClass("active_logo"),$(".info h4").text("Egy főre jutó EU támogatás (fő / Ft)"),"megye"===adminUnit?$.ajax({dataType:"json",async:!0,url:"js/megye.json",delay:3,success:function(e){map.removeLayer(geojson),geojson=L.geoJson(e,{style:style,onEachFeature:onEachFeature}),geojson.addTo(map)},error:function(){},complete:function(){$(".spinner").remove(),$(".popup.leaflet-control").removeClass("hover_pop")}}):"kisterseg"===adminUnit?$.ajax({dataType:"json",async:!0,url:"js/kisterseg.json",delay:3,success:function(e){map.removeLayer(geojson),geojson=L.geoJson(e,{style:style,onEachFeature:onEachFeature}),geojson.addTo(map)},error:function(){},complete:function(){$(".spinner").remove(),$(".popup.leaflet-control").removeClass("hover_pop")}}):"telepules"===adminUnit&&$.ajax({dataType:"json",async:!0,url:"js/telepules.json",success:function(e){map.removeLayer(geojson),geojson=L.geoJson(e,{style:style,onEachFeature:onEachFeature}),geojson.addTo(map)},error:function(){},complete:function(){$(".spinner").remove(),$(".popup.leaflet-control").removeClass("hover_pop")}}),map.removeControl(legend),legend.addTo(map))}),$("#cash_logo").hover(function(){"DONATION"!=metric&&($(".playchart_1").remove(),$("#playchart").hide(),$("#cash_logo").addClass("hover_logo"),$(".popup.leaflet-control").addClass("hover_pop"),$(".popup.leaflet-control").html("Átlagos évi EU támogatás 2007-2015."),$(".popup").append(loader))},function(){"DONATION"===metric?($(".popup.leaflet-control").html("Átlagos évi EU támogatás 2007-2015."),$("#cash_logo").removeClass("hover_logo"),$("#cash_logo").addClass("active_logo"),$(".popup.leaflet-control").removeClass("hover_pop")):"CAPITA"===metric?($(".popup.leaflet-control").html("Egy főre jutó évi EU támogatás 2007-2015."),
$("#cash_logo").removeClass("hover_logo"),$(".popup.leaflet-control").removeClass("hover_pop")):($(".popup.leaflet-control").html("Választási ciklus szerinti EU támogatás"),$("#cash_logo").removeClass("hover_logo"),$(".popup.leaflet-control").removeClass("hover_pop"))}),$("#cash_logo").on("click",function(){$(".party_selector_wrapper").hide(),adminUnit=map.getZoom()<=9?"megye":map.getZoom()<=11?"kisterseg":"telepules",("DEVIATION_2007"===metric||"DEVIATION_2010"===metric||"DEVIATION_2014"===metric)&&map.removeLayer(stripes),"DONATION"!=metric&&(metric="DONATION",timeSeries="DONATION_TIME",$(".spinner").show(),$(".chart_legend_b").hide(),$(".chart_legend_a").show(),$(".logo").each(function(){$(this).removeClass("active_logo"),$(this).removeClass("hover_logo")}),$("#cash_logo").addClass("active_logo"),$(".info h4").text("Átlagos EU támogatás (millió Ft / év)"),"megye"===adminUnit?$.ajax({dataType:"json",async:!0,url:"js/megye.json",delay:3,success:function(e){map.removeLayer(geojson),geojson=L.geoJson(e,{style:style,onEachFeature:onEachFeature}),geojson.addTo(map)},error:function(){},complete:function(){$(".spinner").remove(),$(".popup.leaflet-control").removeClass("hover_pop")}}):"kisterseg"===adminUnit?$.ajax({dataType:"json",async:!0,url:"js/kisterseg.json",success:function(e){map.removeLayer(geojson),geojson=L.geoJson(e,{style:style,onEachFeature:onEachFeature}),geojson.addTo(map)},error:function(){},complete:function(){$(".spinner").remove(),$(".popup.leaflet-control").removeClass("hover_pop")}}):"telepules"===adminUnit&&$.ajax({dataType:"json",async:!0,url:"js/telepules.json",success:function(e){map.removeLayer(geojson),geojson=L.geoJson(e,{style:style,onEachFeature:onEachFeature}),geojson.addTo(map)},error:function(){},complete:function(){$(".spinner").remove(),$(".popup.leaflet-control").removeClass("hover_pop")}}),map.removeControl(legend),legend.addTo(map))}),$("#bank_logo").hover(function(){"DEVIATION"!=timeSeries&&($(".playchart_1").remove(),$("#playchart").hide(),$("#bank_logo").addClass("hover_logo"),$(".popup.leaflet-control").addClass("hover_pop"),$(".popup.leaflet-control").html("Választási ciklus szerinti EU támogatás"),$(".popup").append(loader))},function(){"DONATION"===metric?($(".popup.leaflet-control").html("Átlagos évi EU támogatás 2007-2015."),$("#bank_logo").removeClass("hover_logo"),$(".popup.leaflet-control").removeClass("hover_pop")):"CAPITA"===metric?($(".popup.leaflet-control").html("Egy főre jutó évi EU támogatás 2007-2015."),$("#bank_logo").removeClass("hover_logo"),$(".popup.leaflet-control").removeClass("hover_pop")):($(".popup.leaflet-control").html("Választási ciklus szerinti EU támogatás"),$("#bank_logo").removeClass("hover_logo"),$("#bank_logo").addClass("active_logo"),$(".popup.leaflet-control").removeClass("hover_pop"))}),$("#bank_logo").on("click",function(){if($(".party_selector_wrapper").show(),"DEVIATION"!=timeSeries){$(".spinner").show();var e=$("#party_selector").val();metric=e,timeSeries="DEVIATION",adminUnit="telepules",$.ajax({dataType:"json",async:!0,url:"js/telepules.json",success:function(e){map.removeLayer(geojson),stripes=L.geoJson(e,{style:stripes_style,onEachFeature:onEachFeature}).addTo(map),geojson=L.geoJson(e,{style:style,onEachFeature:onEachFeature}),geojson.addTo(map)},error:function(){},complete:function(){$(".spinner").remove(),$(".popup.leaflet-control").removeClass("hover_pop")}}),$(".chart_legend_a").hide(),$(".chart_legend_b").show(),$(".logo").each(function(){$(this).removeClass("active_logo"),$(this).removeClass("hover_logo")}),$("#bank_logo").addClass("active_logo"),$(".info h4").text("2007-2015 országos átlagától vett eltérés (%)"),map.removeControl(legend),legend.addTo(map)}}),$("#party_selector").on("change",function(){var e=$(this).val();"DEVIATION_2007"===e?(metric="DEVIATION_2007",$(".popup").html("2007-2009. szerinti EU támogatás"),$(".popup").append(loader)):"DEVIATION_2010"===e?(metric="DEVIATION_2010",$(".popup").html("2010-2013. szerinti EU támogatás"),$(".popup").append(loader)):"DEVIATION_2014"===e&&(metric="DEVIATION_2014",$(".popup").html("2014-2015. szerinti EU támogatás"),$(".popup").append(loader)),$(".popup.leaflet-control").addClass("hover_pop"),$(".spinner").show(),$.ajax({dataType:"json",async:!0,url:"js/telepules.json",success:function(e){map.removeLayer(stripes),map.removeLayer(geojson),stripes=L.geoJson(e,{style:stripes_style,onEachFeature:onEachFeature}).addTo(map),geojson=L.geoJson(e,{style:style,onEachFeature:onEachFeature}),geojson.addTo(map)},error:function(){},complete:function(){$(".spinner").remove(),$(".popup.leaflet-control").removeClass("hover_pop")}})});var e=d3.select("body").append("svg").attr("id","d3svga").attr("width",120).attr("height",120);e.append("defs").attr({id:"striper"}).append("pattern").attr({id:"pattern_stripe",width:"4",height:"4",patternUnits:"userSpaceOnUse",patternTransform:"rotate(45)"}).append("rect").attr({width:"2",height:"4",transform:"translate(0,0)",fill:"white"});e.select("#striper").append("mask").attr({id:"mask-stripe"}).append("rect").attr({x:"0",y:"0",width:"100%",height:"100%",fill:"url(#pattern_stripe"});e.append("defs").append("pattern").attr({id:"hash4_4",width:"10",height:"10",patternUnits:"userSpaceOnUse",patternTransform:"rotate(60)"}).append("rect").attr({width:"2",height:"10",transform:"translate(0,0)",fill:"#4D8E27"}),e.append("defs").append("pattern").attr({id:"purpleStripe",width:"10",height:"10",patternUnits:"userSpaceOnUse",patternTransform:"rotate(60)"}).append("rect").attr({width:"2",height:"10",transform:"translate(0,0)",fill:"rgba(51,51,51,0.9"}),e.append("defs").append("pattern").attr({id:"hash4_5",x:"6",y:"6",width:"8",height:"8",patternUnits:"userSpaceOnUse",patternTransform:"rotate(45)"}).append("rect").attr({x:"4",y:"4",width:"4",height:"4",transform:"translate(0,0)",fill:"rgba(51,51,51,0.9"}),e.append("defs").append("pattern").attr({id:"hash4_6",x:"0",y:"0",width:"14",height:"25",patternUnits:"userSpaceOnUse"}).append("svg:image").attr({x:"0",y:"0",width:"14",height:"25"}).attr("xlink:href","data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NiIgaGVpZ2h0PSIxMDAiPgo8cmVjdCB3aWR0aD0iNTYiIGhlaWdodD0iMTAwIiBmaWxsPSIjZjhkMjAzIj48L3JlY3Q+CjxwYXRoIGQ9Ik0yOCA2NkwwIDUwTDAgMTZMMjggMEw1NiAxNkw1NiA1MEwyOCA2NkwyOCAxMDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZjYyOSIgc3Ryb2tlLXdpZHRoPSIyIj48L3BhdGg+CjxwYXRoIGQ9Ik0yOCAwTDI4IDM0TDAgNTBMMCA4NEwyOCAxMDBMNTYgODRMNTYgNTBMMjggMzQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZTUwMyIgc3Ryb2tlLXdpZHRoPSIyIj48L3BhdGg+Cjwvc3ZnPg==");if($(".chart").on("mouseover",function(){}),$(".chart").on("mouseleave",function(){$(".playchart_1").remove(),$("#playchart").hide()}),$(".legend_chart").on("mouseenter",function(){var e=String($(this).attr("id")),t=0;$(".bars").each(function(){if($(this).is(".bars."+e)){$(this).show();var a=$(this).attr("height");if($(this).attr("y",205-a),"0"!=$(this).attr("height")){var r=$(this).attr("data-balance");t+=parseInt(r)}}else $(this).hide()}),$(".trendline").hide()}),$(".legend_chart").on("mouseleave",function(){var e=String($(this).attr("id"));$(".bars").each(function(){if($(this).is(".bars."+e)){var t=$(this).attr("data-selected");$(this).attr("y",t),$(this).show()}else $(this).show()}),$(".trendline").show(),$(".info_ammount.hidden_info").hide(),$(".info_ammount.original_info").show(),$("h4.hidden_info").hide(),$("h4.original_info").show()}),$(".sk-cube-grid").hide(),getUrlParameter("telepules")){$("title").text("EU támogatások | "+getUrlParameter("telepules")),$(".main_search").val(getUrlParameter("telepules"));var t=getUrlParameter("telepules"),a=markersById[t],r=a.getBounds().getCenter(),o=[r.lat,r.lng];map.setView(new L.LatLng(o[0],o[1]),12,{animate:!0}),markersById[t].setStyle({weight:4,color:"#4D8E27",dashArray:"10",fillColor:"url(#hash4_4)",fillOpacity:.2}),setTimeout(function(){markersById[t].setStyle({weight:4,color:"#4D8E27",dashArray:"10",fillColor:"url(#hash4_4)",fillOpacity:.2}),info.update(a.feature.properties)},2e3),$(".legend_elem").each(function(){$(this).removeClass("legend_featured"),parseInt($(this).attr("data-range_start"))<=parseInt(a.feature.properties[metric])&&parseInt($(this).attr("data-range_end"))>=parseInt(a.feature.properties[metric])?$(this).addClass("legend_featured"):parseInt($(this).attr("data-range_start"))<=parseInt(a.feature.properties[metric])&&"undefined"===$(this).attr("data-range_end")&&$(this).addClass("legend_featured")}),map.on("movestart",function(){geojson.resetStyle(markersById[t])})}if(getUrlParameter("view")){var n=getUrlParameter("view");if("1"===n)metric="DONATION",timeSeries="DONATION_TIME",$(".logo").each(function(){$(this).removeClass("active_logo"),$(this).removeClass("hover_logo")}),$("#cash_logo").addClass("active_logo"),map.removeControl(legend),legend.addTo(map),$.ajax({dataType:"json",async:!0,url:"js/megye.json",success:function(e){geojson=L.geoJson(e,{style:style,onEachFeature:onEachFeature}),geojson.addTo(map)},error:function(){},complete:function(){}});else if("2"===n)metric="CAPITA",timeSeries="CAPITA_TIME",$(".logo").each(function(){$(this).removeClass("active_logo"),$(this).removeClass("hover_logo")}),$("#human_logo").addClass("active_logo"),map.removeControl(legend),legend.addTo(map),$.ajax({dataType:"json",async:!0,url:"js/megye.json",success:function(e){geojson=L.geoJson(e,{style:style,onEachFeature:onEachFeature}),geojson.addTo(map)},error:function(){},complete:function(){}});else if("3"===n){if(getUrlParameter("year")){var s=parseInt(getUrlParameter("year"));2010>s?(metric="DEVIATION_2007",$("#party_selector").val("DEVIATION_2007")):2014>s?(metric="DEVIATION_2010",$("#party_selector").val("DEVIATION_2010")):(metric="DEVIATION_2014",$("#party_selector").val("DEVIATION_2014"))}else metric="DEVIATION_2007";timeSeries="DEVIATION",adminUnit="telepules",$(".logo").each(function(){$(this).removeClass("active_logo"),$(this).removeClass("hover_logo")}),$("#bank_logo").addClass("active_logo"),$(".party_selector_wrapper").show(),map.removeControl(legend),legend.addTo(map),$.ajax({dataType:"json",async:!0,url:"js/telepules.json",success:function(e){stripes=L.geoJson(e,{style:stripes_style,onEachFeature:onEachFeature}).addTo(map),geojson=L.geoJson(e,{style:style,onEachFeature:onEachFeature}),geojson.addTo(map)},error:function(){},complete:function(){}}),$(".chart_legend_a").hide(),$(".chart_legend_b").show()}}else $.ajax({dataType:"json",async:!0,url:"js/megye.json",success:function(e){geojson=L.geoJson(e,{style:style,onEachFeature:onEachFeature}),geojson.addTo(map)},error:function(){},complete:function(){}});if(getUrlParameter("fullview")){var n=getUrlParameter("fullview");"true"===n&&($("#fullview").show(),map.scrollWheelZoom.disable())}$(window).on("resize",function(){var e=$(this).width();440>e?($(".chart").hide(),$(".search_wrapper").hide(),$(".info").css("width","200px"),$("#bank_logo").css("margin-right","0px"),$("#header").css({width:"calc(100% - 63px)",left:"63px"}),$(".logo_wrapper").css("width","65px"),$("#header_logo").css({width:"55px",top:"36px",left:"5px"})):700>e?($(".search_wrapper").hide(),$(".chart").show(),$(".info").css("width","304px"),$("#bank_logo").css("margin-right","5px"),$("#header").css({width:"calc(100% - 165px)",left:"165px"}),$(".logo_wrapper").css("width","167px"),$("#header_logo").css({width:"145px",top:"15px",left:"10px"})):($(".search_wrapper").show(),$(".chart").show(),$(".info").css("width","304px"),$("#bank_logo").css("margin-right","5px"),$("#header").css({width:"calc(100% - 165px)",left:"165px"}),$(".logo_wrapper").css("width","167px"),$("#header_logo").css({width:"145px",top:"15px",left:"10px"}))});var i=$(window).width();440>i?($(".chart").hide(),$(".search_wrapper").hide(),$(".info").css("width","200px"),$(".legend_featured").css("width","80%"),$("#bank_logo").css("margin-right","0px"),$("#header").css({width:"calc(100% - 63px)",left:"63px"}),$(".logo_wrapper").css("width","65px"),$("#header_logo").css({width:"55px",top:"36px",left:"5px"})):700>i?($(".search_wrapper").hide(),$(".chart").show(),$(".info").css("width","304px"),$("#bank_logo").css("margin-right","5px"),$("#header").css({width:"calc(100% - 165px)",left:"165px"}),$(".logo_wrapper").css("width","167px"),$("#header_logo").css({width:"145px",top:"15px",left:"10px"})):($(".search_wrapper").show(),$(".chart").show(),$(".info").css("width","304px"),$("#bank_logo").css("margin-right","5px"),$("#header").css({width:"calc(100% - 165px)",left:"165px"}),$(".logo_wrapper").css("width","167px"),$("#header_logo").css({width:"145px",top:"15px",left:"10px"}))});
